
%% bare_jrnl_compsoc.tex
%% V1.4a
%% 2014/09/17
%% by Michael Shell
%% See:
%% http://www.michaelshell.org/
%% for current contact information.
%%
%% This is a skeleton file demonstrating the use of IEEEtran.cls
%% (requires IEEEtran.cls version 1.8a or later) with an IEEE
%% Computer Society journal paper.
%%
%% Support sites:
%% http://www.michaelshell.org/tex/ieeetran/
%% http://www.ctan.org/tex-archive/macros/latex/contrib/IEEEtran/
%% and
%% http://www.ieee.org/

%%*************************************************************************
%% Legal Notice:
%% This code is offered as-is without any warranty either expressed or
%% implied; without even the implied warranty of MERCHANTABILITY or
%% FITNESS FOR A PARTICULAR PURPOSE! 
%% User assumes all risk.
%% In no event shall IEEE or any contributor to this code be liable for
%% any damages or losses, including, but not limited to, incidental,
%% consequential, or any other damages, resulting from the use or misuse
%% of any information contained here.
%%
%% All comments are the opinions of their respective authors and are not
%% necessarily endorsed by the IEEE.
%%
%% This work is distributed under the LaTeX Project Public License (LPPL)
%% ( http://www.latex-project.org/ ) version 1.3, and may be freely used,
%% distributed and modified. A copy of the LPPL, version 1.3, is included
%% in the base LaTeX documentation of all distributions of LaTeX released
%% 2003/12/01 or later.
%% Retain all contribution notices and credits.
%% ** Modified files should be clearly indicated as such, including  **
%% ** renaming them and changing author support contact information. **
%%
%% File list of work: IEEEtran.cls, IEEEtran_HOWTO.pdf, bare_adv.tex,
%%                    bare_conf.tex, bare_jrnl.tex, bare_conf_compsoc.tex,
%%                    bare_jrnl_compsoc.tex, bare_jrnl_transmag.tex
%%*************************************************************************


% *** Authors should verify (and, if needed, correct) their LaTeX system  ***
% *** with the testflow diagnostic prior to trusting their LaTeX platform ***
% *** with production work. IEEE's font choices and paper sizes can       ***
% *** trigger bugs that do not appear when using other class files.       ***                          ***
% The testflow support page is at:
% http://www.michaelshell.org/tex/testflow/


\documentclass[10pt,conference,onecolumn,compsoc]{IEEEtran}


\usepackage{hyperref}
\usepackage{enumitem}
\setlist[itemize]{leftmargin=3 cm}
\setlist[enumerate]{leftmargin=3cm}



% *** CITATION PACKAGES ***
%
\ifCLASSOPTIONcompsoc
  % IEEE Computer Society needs nocompress option
  % requires cite.sty v4.0 or later (November 2003)
  \usepackage[nocompress]{cite}
\else
  % normal IEEE
  \usepackage{cite}
\fi
% cite.sty was written by Donald Arseneau
% V1.6 and later of IEEEtran pre-defines the format of the cite.sty package
% \cite{} output to follow that of IEEE. Loading the cite package will
% result in citation numbers being automatically sorted and properly
% "compressed/ranged". e.g., [1], [9], [2], [7], [5], [6] without using
% cite.sty will become [1], [2], [5]--[7], [9] using cite.sty. cite.sty's
% \cite will automatically add leading space, if needed. Use cite.sty's
% noadjust option (cite.sty V3.8 and later) if you want to turn this off
% such as if a citation ever needs to be enclosed in parenthesis.
% cite.sty is already installed on most LaTeX systems. Be sure and use
% version 5.0 (2009-03-20) and later if using hyperref.sty.
% The latest version can be obtained at:
% http://www.ctan.org/tex-archive/macros/latex/contrib/cite/
% The documentation is contained in the cite.sty file itself.



% *** GRAPHICS RELATED PACKAGES ***
%
\ifCLASSINFOpdf
   \usepackage[pdftex]{graphicx}
 
\else
 
\fi
% graphicx was written by David Carlisle and Sebastian Rahtz. It is
% required if you want graphics, photos, etc. graphicx.sty is already
% installed on most LaTeX systems. The latest version and documentation
% can be obtained at: 
% http://www.ctan.org/tex-archive/macros/latex/required/graphics/
% Another good source of documentation is "Using Imported Graphics in
% LaTeX2e" by Keith Reckdahl which can be found at:
% http://www.ctan.org/tex-archive/info/epslatex/
%
% latex, and pdflatex in dvi mode, support graphics in encapsulated
% postscript (.eps) format. pdflatex in pdf mode supports graphics
% in .pdf, .jpeg, .png and .mps (metapost) formats. Users should ensure
% that all non-photo figures use a vector format (.eps, .pdf, .mps) and
% not a bitmapped formats (.jpeg, .png). IEEE frowns on bitmapped formats
% which can result in "jaggedy"/blurry rendering of lines and letters as
% well as large increases in file sizes.
%
% You can find documentation about the pdfTeX application at:
% http://www.tug.org/applications/pdftex









% *** PDF, URL AND HYPERLINK PACKAGES ***
%
\usepackage{url}
% url.sty was written by Donald Arseneau. It provides better support for
% handling and breaking URLs. url.sty is already installed on most LaTeX
% systems. The latest version and documentation can be obtained at:
% http://www.ctan.org/tex-archive/macros/latex/contrib/url/
% Basically, \url{my_url_here}.




\begin{document}

\title{Temtris}
%
%

% received ..."  text while in non-compsoc journals this is reversed. Sigh.

\author{Curt Lynch}

\IEEEtitleabstractindextext{%
\begin{abstract}
Temtris is a Tetris clone I developed as part of my CSCI 352 class at the University of Tennessee at Martin. The goal of developing Temtris was to work on a larger project with a partner in order to gain valuable experience working with other people. It was also fun to be able to execute on a project from start to finish that was our own.
\end{abstract}
}

% make the title area
\maketitle

\IEEEdisplaynontitleabstractindextext

\IEEEpeerreviewmaketitle

\section{Introduction}
Temtris is a clone of Tetris made with C\# and WPF. Tetris, is a game where 4 block section shapes fall from top down and you try to fit rows of these blocks together at an ever increasing pace until the screen inevitably fills causing game over. A score is computed based on how efficiently you clear the board as the game progresses, with more points being awarded for streaks of row clears and Tetris row clears (4 simultaneous row clears). Our target audience is anyone looking to pass time with a casual game of Tetris. Temtris is being developed as a class project, however I still want Temtris to be a fun and interesting game for anyone.

\subsection{Background}
A Tetrimino is one of the 7 classic Tetris shapes; these include the O, I, T, L, J, S, and Z shapes. Each Tetrimino is made up of four squares called minos. The matrix is the space where the Tetris game is played. A 'line clear' happens when a horizontal row is completely filled, causing it to be removed from the matrix. Lock-down is when a Tetrimino is locked into its current position and is no longer controllable.

While attempting to brainstorm ideas for our CSCI 352 class, the idea of a Tetris clone come up (with the awful misspelling Temtris). Eventually we settled on the idea and the name stuck.

\subsection{Impacts}
Tetris is a classic game that has had a major impact on the gaming community since its debut. Continuing to iterate upon Tetris and bring it back into the community repeatedly will only deepen its legacy. Temtris is a great way to  do this while improving our skills and preparing us for working in teams and on larger projects in the future.

\subsection{Challenges}
The first real challenge was getting the UI elements in WPF to update in time with the game. WPF is not as suited to real-time updates as I would've liked and as such, it was necessary to run the game on a separate thread from the UI. This was the first time I've had to share data across multiple threads and getting this part working correctly took a bit of trial and error. It was also the first time I needed to really deviate from the planned UML.

The only other real issue I ran into was getting the input to work how I wanted. System.Window.Input exposes the current state of the keyboard, but I quickly found out I really needed to keep track of the previous state of the input and linking the updates to the game updates somehow. This led to the creation of a separate class just for handling keyboard input.

\section{Scope}
The initial goal is to implement the following typical parts of a Tetris game: 
\begin{itemize}
\item Implement a main menu.
\item Have controllable tetriminos (2x1 shapes initially) that fall into place in the matrix. 
\item Have rows that disappear when they fill up, i.e., the line clears.
\item Keep score or track how well the player does in some way.
\item Display the next piece to spawn.
\end{itemize}

As stretch goals, the following features can be implemented:
\begin{itemize}
\item Implement all 7 tetrimino variants.
\item Ability to swap active tetrimino with the next tetrimino during gameplay.
\item Implement a multiplayer mode. Having at least two clients with a competitive game mode over LAN or just sharing a keyboard.
\item Different power-ups may be earned by removing a certain amount of one color from the board. Perhaps board clear (of that color) or maybe have the next five pieces all be 'L' shapes.
\item Play background music and have sound effects for line clears, player actions, etc.
\item Have random shapes form and fall into the matrix. (instead of the standard Tetris shapes)
\end{itemize}

\subsection{Requirements}
These requirements are things we feel make Tetris what it is. Without them Temtris would ultimately not be a Tetris clone.

\subsubsection{Functional}
\begin{itemize}
\item Users can control Tetriminos (rotate, move left or right).
\item Tetriminos are created and fall from the top of the matrix.
\item Row clears should happen as the rows are filled.
\item Main menu allows the user to start the game.
\end{itemize}

\subsubsection{Non-Functional}
\begin{itemize}
\item Controls should be intuitive and obvious.
\item User interface should be attractive and inviting.
\end{itemize}

\subsection{Use Cases}
\begin{table}[h!]
\centering
\begin{tabular}{|c|c|c|c|c|}
\hline
Use Case ID & Use Case Name & Primary Actor & Complexity & Priority \\
\hline \hline
1 & Start game & Player & Easy & 1\\
\hline
2 & Move tetriminos left or right & Player & Easy & 1\\
\hline
3 & Lower tetrimonios into position & Player & Med & 2\\
\hline
4 & Rotate tetriminos & Player & Hard & 3\\
\hline
\end{tabular}
\caption{use case table}
\label{tab:useCaseIndex}
\end{table}

\begin{itemize}
\item[Use Case Number:] 1
\item[Use Case Name:] Start game
\item[Description:] A player wishes to pass some time by playing Temtris. They start the game and click on the "Start Game" button from the main menu.
\end{itemize}
\begin{enumerate}
\item The Player launches the application.
\item The Player left-clicks on "Start Game" button.
\item The game screen appears and the game begins.
\item[Termination Outcome:] A game of Temtris is now running.
\end{enumerate}
\medskip
 
\begin{itemize}
\item[Use Case Number:] 2
\item[Use Case Name:] Move tetriminos left or right
\item[Description:] A game of Temtris has been started and the player wishes to move the falling piece to the left or right. The player presses the left or right arrow on the keyboard and the active tetrimino moves accordingly.
\end{itemize}
\begin{enumerate}
\item The player presses the left arrow key on the keyboard.
\item The active tetrimino shifts one position to the left.
\item Player presses the right arrow key on the keyboard.
\item The active tetrimino shifts one block to the right.
\item[Termination Outcome:] The player has control over the left and right motion of the active tetrimino.
\end{enumerate}
\medskip

\begin{itemize}
\item[Use Case Number:] 3
\item[Use Case Name:] Lower tetriminos into position
\item[Description:] The player is comfortable with the current trajectory of the active tetrimino and wishes to lower it into place. The player presses the down arrow key on the keyboard and the active tetrimino moves down into place.
\end{itemize}
\begin{enumerate}
\item The player presses the down arrow key on the keyboard.
\item The active tetrimino begins to fall faster.
\item The active tetrimino stops falling when it reaches inactive tetriminos and is set into place.
\item[Termination Outcome:] The player can speed up the falling of the active tetrimino.
\end{enumerate}
\medskip
 
\begin{itemize}
\item[Use Case Number:] 4
\item[Use Case Name:] Rotate tetriminos
\item[Description:] The player wishes to rotate a tetrimino and presses the up arrow key on the keyboard. The active tetrimino rotates ninety degrees allowing the player to better control how it falls.
\end{itemize}
\begin{enumerate}
\item The player presses the up arrow key on the keyboard.
\item The active tetrimino rotates 90 degrees clockwise.
\item The player presses the up arrow key on the keyboard.
\item The active tetrimino rotates an additional 90 degrees clockwise.
\item[Termination Outcome:] The player has control over the rotation of the active tetrimino.
\end{enumerate}
\medskip

\subsection{Interface}

\begin{figure}[!h]
\centering
\includegraphics[scale=0.3]{Temtris_Menu.png}
\includegraphics[scale=0.3]{Temtris_Game.png}
\includegraphics[scale=.8]{Temtris_GameOver.png}
\caption{Temtris at the main menu(left), during a game(center), and the game over pop-up(right).}
\label{fig:uimockups}
\end{figure}

Figure \ref{fig:uimockups} shows various screenshots from Temtris as the user plays the game. The left image, showing the main menu, allows the user to start a game, as in use case 1, or exit the application. The center image shows the game after a game has started and is where use cases 2, 3, and 4 take place. It also shows how the controls are displayed when starting a game. The image on the right is an example of what is displayed when the player finishes a game.

\section{Project Timeline}
\begin{figure}[!h]
\centering
\includegraphics[scale=.45]{Timeline.png}
\caption{Project Timeline}
\label{fig:timeline}
\end{figure}

Figure \ref{fig:timeline} shows the Temtris project timeline. As with most projects following the waterfall development cycle we wanted to solidify most of the design as early possible. This unfortunately left us with little time to actually implement the project and work out any rough edges in our design. If I had the chance to do this again I would've spent more time early getting used to WPF before attempting to outline a project using it. 

\section{Project Structure}
The UI exists within the auto generated MainWindow class, which calls upon an instantiation of the TemtrisGame class to handle all of the game logic and keyboard input.

\begin{figure}[!h]
\centering
\includegraphics[scale=0.4]{ClassDiagrams.png}
\caption{UML Diagram for Temtris}
\label{fig:uml}
\end{figure}

\subsection{UML Outline}
Figure \ref{fig:uml} shows the breakdown of the class hierarchy for Temtris. MainWindow is the auto generated class given when starting a WPF project in Visual Studio. This is the home of our UI and, for our purposes, the entry point of the application. MainWindow utilizes TemtrisGame to get the layout and position of all tetriminos. GameEngine handles some of the more mundane non-Tetris aspects of the game engine, i.e., timekeeping, pushing updates to the UI, etc. TemtrisGame handles all of the game logic, i.e., tetrimino movement, row clearing, checking for user input, etc. TemtrisGame also houses the Matrix, MinoFactory, and KeyboardInput objects. Input is a simple class that keeps track of user input for TemtrisGame. It gives us a bit more flexibility by allowing us to choose when it gets updated. Matrix is really just a data container for the score and all of the minos. Minofactory and its children are responsible for telling TemtrisGame how fast the tetriminos should fall and generating the tetriminos used.

\subsection{Design Patterns Used}
The GameEngine and TemtrisGame classes demonstrate the template design pattern. This lets us separate the game engine logic from the Temtris specific logic and potentially allows for the reuse of the GameEngine class in other projects.

The MinoFactory and subclasses demonstrate the factory method and strategy design patterns. The NextTetra method creates different types of tetraminos with different frequencies depending on the concrete class used. The NextFallRate method allows the concrete classes to determine how fast the tetraminos fall during gameplay.


\section{Results}
While not as polished as I would've liked. The initial goals and the "all 7 tetrimino variants" stretch goal were completed. All four use cases described above are also feasible in the current state of Temtris.

\subsection{Future Work}
It would be nice to say we will continue to work on Temtris and implement all of the stretch goals over the summer. There's much more to learn from continuing to work on the project, and maybe some of the code will be reused in a future project, but Temtris is in a playable state and will likely not receive any further updates.

% that's all folks
\end{document}


